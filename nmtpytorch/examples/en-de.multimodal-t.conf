[train]
seed: 0
model_type: MultimodalTransformer
patience: 10
max_epochs: 500
eval_freq: 0
eval_metrics: meteor,bleu,loss
# Tokenization was done with -a parameter of moses tokenizer
eval_filters: 
eval_beam: 1
eval_batch_size: 1000
save_best_metrics: True
eval_max_len: 100
n_checkpoints: 0
l2_reg: 1e-05
lr_decay: False
lr_decay_revert: False
lr_decay_factor: 0.5
lr_decay_patience: 2
gclip: 1
optimizer: transformer
lr: 0.0442
batch_size: 4000
save_path: ./ckpt
tensorboard_dir: ./tb_dir

[model]
direction: en:Text, feats:Numpy -> de:Text
feat_ratio: 0.5
dropnet: 0.3
feat_name: feats
feat_dim: 2048
n_feats: 5

sampler_type: token
bucket_by: en

[data]
tok: $HOME/data/multi30k/tok
feats: $HOME/data/multi30k/faster-rcnn

train_set: {'en': '${tok}/train.lc.norm.tok.en',
            'feats': '${feats}/train.obj36.feature.npy',
            'de': '${tok}/train.lc.norm.tok.de'}

val_set: {'en': '${tok}/val.lc.norm.tok.en',
          'feats': '${feats}/val.obj36.feature.npy',
          'de': '${tok}/val.lc.norm.tok.de'}

test_2016_flickr_set: {'en': '${tok}/test_2016_flickr.lc.norm.tok.en',
                       'feats': '${feats}/test_2016_flickr.obj36.feature.npy',
                       'de': '${tok}/test_2016_flickr.lc.norm.tok.de'}

test_2017_flickr_set: {'en': '${tok}/test_2017_flickr.lc.norm.tok.en',
                       'feats': '${feats}/test_2017_flickr.obj36.feature.npy',
                       'de': '${tok}/test_2017_flickr.lc.norm.tok.de'}

test_2018_flickr_set: {'en': '${tok}/test_2018_flickr.lc.norm.tok.en',
                       'feats': '${feats}/test_2018_flickr.obj36.feature.npy'}

[vocabulary]
en: vocab/train.lc.norm.tok.vocab.en
de: vocab/train.lc.norm.tok.vocab.de
