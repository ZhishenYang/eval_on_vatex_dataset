# Transformer (tiny) cited from 
# https://openreview.net/pdf?id=Q9U_H8lQ4yV

[train]
seed: 0
model_type: Transformer
patience: 10
max_epochs: 500
eval_freq: 0
eval_metrics: meteor,bleu,loss
# Tokenization was done with -a parameter of moses tokenizer
eval_filters: 
eval_beam: 1
eval_batch_size: 1000
save_best_metrics: True
eval_max_len: 100
n_checkpoints: 0
l2_reg: 1e-05
lr_decay: False
lr_decay_revert: False
lr_decay_factor: 0.5
lr_decay_patience: 2
gclip: 1
optimizer: transformer
lr: 0.0442
warmup_steps: 2000
batch_size: 4000
save_path: ./ckpt
tensorboard_dir: ./tb_dir

[model]
direction: en->de

n_layers: 4
model_dim: 128
inner_dim: 256
n_heads: 4

sampler_type: token
bucket_by: en

[data]
tok: $HOME/data/multi30k/tok

train_set: {
    'en': '${tok}/train.lc.norm.tok.en',
    'de': '${tok}/train.lc.norm.tok.de'}

val_set: {
    'en': '${tok}/val.lc.norm.tok.en',
    'de': '${tok}/val.lc.norm.tok.de'}

test_2016_flickr_set: {
    'en': '${tok}/test_2016_flickr.lc.norm.tok.en',
    'de': '${tok}/test_2016_flickr.lc.norm.tok.de'}

test_2017_flickr_set: {
    'en': '${tok}/test_2017_flickr.lc.norm.tok.en',
    'de': '${tok}/test_2017_flickr.lc.norm.tok.de'}

test_2018_flickr_set: {
    'en': '${tok}/test_2018_flickr.lc.norm.tok.en'}

[vocabulary]
en: vocab/train.lc.norm.tok.vocab.en
de: vocab/train.lc.norm.tok.vocab.de
